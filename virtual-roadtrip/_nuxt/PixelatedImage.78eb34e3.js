import{a as u,r as _,z as h,b as m,A as v,o as f,e as p,x as g}from"./entry.1b282f1e.js";const w=u({__name:"PixelatedImage",props:{src:{type:String,required:!0},level:{default:20},animate:{default:!1},speed:{default:1}},setup(i){const a=i;let t,e=_(),l,o;h(a,()=>{r()}),m(async()=>{l=e.value.getContext("2d"),r()}),v(()=>{clearInterval(o)});function r(){t=new Image,t.src=a.src,t.onload=s,t.onerror=console.log}function s(){a.animate&&(clearInterval(o),o=setInterval(s,200*a.speed+Math.random()*200*a.speed)),window.requestIdleCallback(()=>{window.requestAnimationFrame(()=>{e.value.height=t.height,e.value.width=t.width;let n=e.value.offsetWidth/a.level*(1+Math.random()*.2);const c=Math.ceil(e.value.height/e.value.width*n);n=Math.ceil(n),l.drawImage(t,0,0,n,c),l.imageSmoothingEnabled=!1,l.drawImage(e.value,0,0,n,c,0,0,e.value.width,e.value.height)})})}return(d,n)=>(f(),p("canvas",{ref_key:"canvas",ref:e},null,512))}});const I=g(w,[["__scopeId","data-v-4f85d983"]]);export{I as _};
